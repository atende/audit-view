<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

	<title>Audit View</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">Audit View</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="active">
                        <a href=".">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="configuration/">Configuration</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="configuration/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#about">About</a></li>
        
    
        <li class="main "><a href="#development-and-production">Development and Production</a></li>
        
            <li><a href="#configure-the-database">Configure the database</a></li>
        
            <li><a href="#configure-the-login-file">Configure the login file</a></li>
        
            <li><a href="#install-bower-dependencies">Install bower dependencies</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="https://app.wercker.com/project/bykey/5116f2ef82779fbea92e5ca1803c39ab"><img alt="wercker status" src="https://app.wercker.com/status/5116f2ef82779fbea92e5ca1803c39ab/m" title="wercker status" /></a></p>
<h1 id="about">About</h1>
<p>This project is a view for logs in relational databases. The logs are collected by the <strong>audit-mq-collector</strong> project, and
generated by any number of applications in a distributed async way.</p>
<p>See <a href="https://github.com/crcpuc/audit-docs">Project Home</a> for more details</p>
<h1 id="development-and-production">Development and Production</h1>
<p>To develop the application you will need preparation for the environment, this preparation is like what is used
in production, but in production you will be doing that different (perhaps env variables).</p>
<p>We need 3 things:</p>
<ol>
<li>Configure the database in application-dev.properties</li>
<li>Create and configure the login file in <a href="http://keycloak.jboss.org">keycloak</a> server</li>
<li>Install Bower Dependencies</li>
</ol>
<p>This application has spring security but it do not authenticate the users. It delegates to the single sign on server
<a href="http://keycloak.jboss.org">keycloak</a></p>
<p>I assume you understand what that means, and way is awesome. If not, don't worry, go to the <a href="http://keycloak.jboss.org">keycloak</a>
site and learn it.</p>
<p class="alert alert-info">

<b>Important note!</b> Spring is programmed to let only users with a <b>AUDIT_VIEW_ACCESS</b> authority to access
this application. That means you need to create that role on keycloak and assign to a user, you can assign a role to
another role by using
</i><a href="http://keycloak.github.io/docs/userguide/keycloak-server/html/roles.html">role composition</a></i>
in keycloak server. That adds the flexibility needed

</p>

<h2 id="configure-the-database">Configure the database</h2>
<p>Create a <strong>srv/main/resources/application-dev.properties</strong> file. There is a <em>application-dev.properties.dist</em> as example
 in the same folder.
 A <em>.dist</em> file is a pattern for distribution, do not edit that unless you wanna change the example, this is a common
 mistake, you need to copy the file because it is different for every single developer machine, because of that,
 this file is configured to be ignored by git.</p>
<p>See <a href="configuration/">configuration.md</a> for details</p>
<h2 id="configure-the-login-file">Configure the login file</h2>
<p>In the keycloak server, you need to create a client application.</p>
<p>Download the file, and put in <strong>srv/main/resource/keycloak-dev.json</strong>. Note that the location of this file is configured
in the <em>application-dev.properties</em> file, and there is a example in the same folder</p>
<p>In production you probably wanna change that dynamically with env variables.</p>
<h2 id="install-bower-dependencies">Install bower dependencies</h2>
<p>The web files are located in <strong>srv/main/webapp</strong> you need NodeJS installed and the bower package manage installed by
<em>npm</em> as a global command. The procedure is to go to the folder in the command line and run <code>bower install</code></p>
<p>There is, however a gradle command to do that, and the gradle try to install dependencies in the build. That way
 <code>gradle build</code> is everything you need for a production <em>jar</em></p>
<p>Installing the dependencies:</p>
<pre><code> npm install -g bower
 cd src/main/webapp
 bower install
</code></pre>
<p>Or with gradle</p>
<pre><code>npm install -g bower
./gradlew bowerInstall
</code></pre>
<p>You can run the application, the default environment is the <strong>dev</strong> environment. I recomend to change that in production
using the flag <strong>--spring.profiles.active=prod</strong></p>
<p>See <a href="configuration/">configuration</a> for options on how to config the application</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>

<!--
MkDocs version : 0.15.3
Build Date UTC : 2016-09-07 12:28:58.273382
-->
